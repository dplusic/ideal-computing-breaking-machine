<script src="/socket.io/socket.io.js"></script>
<script>
    var id;

    var socket = io('http://localhost');
    socket.on('login', function (data) {
        id = data.id;

        socket.on('sync bone', function (data) {
            console.log(data);
        });

        startLoop();
    });

    var frameNo = 0;
    function onUpdate() {
        console.log(id + ' ' + frameNo++);
        socket.emit('update bone', { id: id, frameNo: frameNo });
    }

    var interval = 1000 / 60;
    function loop() {
        onUpdate();
        setTimeout(loop, interval);
    }
    function startLoop() {
        setTimeout(loop, interval);
    }
</script>
