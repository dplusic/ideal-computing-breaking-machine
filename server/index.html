<script src="/socket.io/socket.io.js"></script>
<script>
    var myId;

    var socket = io('http://localhost');
    socket.on('login', function (id) {
        myId = id;

        socket.on('sync bone', function (id, frameNo) {
            console.log(id, frameNo);
        });

        startLoop();
    });

    var frameNo = 0;
    function onUpdate() {
        console.log('>>> ' + myId + ' ' + frameNo++);
        socket.emit('update bone', myId, frameNo);
    }

    var interval = 1000 / 60;
    function loop() {
        onUpdate();
        setTimeout(loop, interval);
    }
    function startLoop() {
        setTimeout(loop, interval);
    }
</script>
